<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CityEase - Home Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background-color: #f5f5f5;
            overflow-x: hidden;
        }
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #e0e0e0;
        }
        .login-box {
            background-color: white;
            padding: 20px;
            border: 2px solid #ff6200;
            border-radius: 10px;
            width: 300px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        .login-box.visible {
            opacity: 1;
        }
        .login-box h2 {
            font-family: 'Indie Flower', cursive;
            color: #333;
            margin-bottom: 20px;
        }
        .login-box input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .password-container {
            position: relative;
            margin: 10px 0;
        }
        .password-container input {
            width: 100%;
            padding: 10px;
            padding-right: 40px !important;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .eye-icon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 20px;
            color: #ff6200;
        }
        .login-box button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background-color: #ff6200;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .login-box button:hover {
            background-color: #e05500;
        }
        .login-box .continue-btn {
            background-color: #ccc;
            color: #333;
        }
        .login-box a {
            color: #ff6200;
            text-decoration: none;
            font-size: 14px;
        }
        .login-box .error-message {
            color: red;
            font-size: 12px;
            margin-top: 10px;
            display: none;
        }
        .home-container, .profile-container, .feedback-container, 
        .service-details, .booking-form, .payment-confirmation, .terms-container {
            display: none;
            opacity: 0;
            transform: translateX(100%);
            transition: opacity 0.4s ease, transform 0.4s ease;
            padding: 20px;
            min-height: 100vh;
            background-color: #f5f5f5;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
        }
        .visible {
            display: block;
            opacity: 1;
            transform: translateX(0);
        }
        .top-bar {
            background-color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .top-bar .logo {
            font-size: 24px;
            font-weight: bold;
            color: #ff6200;
            cursor: pointer;
        }
        .top-bar .search-bar {
            width: 50%;
        }
        .top-bar .search-bar input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .top-bar .menu-btn {
            background-color: #ff6200;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .top-bar .menu-btn:hover {
            background-color: #e05500;
        }
        .top-bar .login-btn {
            background-color: #ff6200;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }
        .menu-dropdown {
            display: none;
            position: absolute;
            right: 20px;
            top: 50px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .menu-dropdown a {
            display: block;
            padding: 10px;
            color: #333;
            text-decoration: none;
            cursor: pointer;
        }
        .menu-dropdown a:hover {
            background-color: #f0f0f0;
        }
        .services-grid, .sub-services-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            max-width: 1200px;
            margin: 20px auto;
        }
        .service-box, .sub-service-box {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 0;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            width: 200px;
            height: 200px;
            overflow: hidden;
        }
        .service-box:hover, .sub-service-box:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .service-box img, .sub-service-box img {
            width: 100%;
            height: 80%;
            object-fit: cover;
            border: none;
            margin: 0;
            padding: 0;
        }
        .service-box p, .sub-service-box p {
            margin: 5px 0 0;
            font-size: 16px;
            color: #333;
        }
        .service-box.hidden {
            display: none;
        }
        .service-details-content, .booking-form-content, .payment-confirmation-content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .service-details-content h2, .booking-form-content h2, .payment-confirmation-content h2 {
            color: #ff6200;
            margin-bottom: 20px;
        }
        .professional {
            display: flex;
            align-items: center;
            border-bottom: 1px solid #ddd;
            padding: 10px 0;
            max-width: 800px;
            margin: 0 auto;
        }
        .professional img {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-right: 20px;
        }
        .professional-details {
            flex: 1;
        }
        .professional-details p {
            margin: 5px 0;
        }
        .rating {
            color: #ff6200;
        }
        .book-now-btn {
            background-color: #ff6200;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }
        .book-now-btn:hover {
            background-color: #e05500;
        }
        .close-btn {
            background-color: #ff6200;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 20px;
        }
        .booking-form-content input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            max-width: 500px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        .booking-form-content button {
            background-color: #ff6200;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: block;
            margin: 20px auto;
        }
        .booking-form-content button:hover {
            background-color: #e05500;
        }
        .payment-methods {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        .payment-method {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .payment-method:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .payment-method.selected {
            border-color: #ff6200;
        }
        .payment-confirmation-content p {
            margin: 10px 0;
            text-align: center;
        }
        .profile-container form, .feedback-container form {
            max-width: 500px;
            margin: 0 auto;
        }
        .profile-container input, .feedback-container input, .feedback-container textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }
        .feedback-container textarea {
            resize: none;
            height: 100px;
        }
        .profile-container {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }
        .profile-header {
            display: flex;
            align-items: center;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .profile-pic-container {
            position: relative;
            margin-right: 20px;
        }
        .profile-pic {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
        }
        .upload-btn {
            position: absolute;
            bottom: 0;
            right: 0;
            background-color: #ff6200;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 50%;
            cursor: pointer;
        }
        .upload-btn:hover {
            background-color: #e05500;
        }
        .profile-info h1 {
            margin: 0;
            font-size: 24px;
            color: #232F3E;
        }
        .profile-info p {
            margin: 5px 0;
            color: #555;
        }
        .profile-section {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .profile-section h2 {
            font-size: 18px;
            color: #232F3E;
            margin-top: 0;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }
        .order-item, .address-item, .feedback-item {
            border-bottom: 1px solid #eee;
            padding: 10px 0;
        }
        .order-item:last-child, .address-item:last-child, .feedback-item:last-child {
            border-bottom: none;
        }
        .settings-form input, .settings-form select {
            width: 100%;
            max-width: 300px;
            padding: 8px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .settings-form button {
            background-color: #ff6200;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }
        .settings-form button:hover {
            background-color: #e05500;
        }
        .terms-container {
            text-align: center;
        }
        .terms-container p {
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        @media (max-width: 768px) {
            .services-grid, .sub-services-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .top-bar {
                flex-direction: column;
                text-align: center;
            }
            .top-bar .search-bar {
                width: 100%;
                margin: 10px 0;
            }
            .menu-dropdown {
                right: 10px;
            }
            .professional {
                flex-direction: column;
                text-align: center;
            }
            .professional img {
                margin-bottom: 10px;
            }
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            .profile-pic-container {
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="login-container" id="loginPage">
        <div class="login-box visible">
            <h2>Welcome to CityEase</h2>
            <input type="text" id="email" placeholder="Enter email or phone">
            <div class="password-container">
                <input type="password" id="password" placeholder="Your password">
                <i class="eye-icon fas fa-eye" onclick="togglePassword()" id="eyeIcon"></i>
            </div>
            <button onclick="login()">Login</button>
            <p><a href="#" onclick="showRegister()">New here? Sign up!</a> | <a href="#" onclick="showForgotPassword()">Forgot Password?</a></p>
            <button class="continue-btn" onclick="continueWithoutLogin()">Continue Without Login</button>
            <div class="error-message" id="loginError">Invalid email/phone or password.</div>
        </div>
    </div>
    <div class="home-container" id="homePage">
        <div class="top-bar">
            <div class="logo" onclick="navigate('homePage')">CityEase</div>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search for services (e.g., Plumber in Hitech City)" oninput="searchServices()">
            </div>
            <div>
                <button class="login-btn" onclick="navigate('loginPage')">Login</button>
                <button class="menu-btn" onclick="toggleMenu()">Menu</button>
                <div class="menu-dropdown" id="menuDropdown">
                    <a onclick="navigate('profilePage')">Profile</a>
                    <a onclick="navigate('feedbackPage')">Feedback</a>
                    <a onclick="navigate('termsPage')">Terms & Conditions</a>
                    <a onclick="logout()">Logout</a>
                </div>
            </div>
        </div>
        <h1 style="margin-top: 20px; margin-left: 20px;">Available Services</h1>
        <div class="services-grid" id="servicesGrid">
            <div class="service-box" data-service="Automobile Repair & Maintenance" onclick="openService('Automobile Repair & Maintenance')">
                <img src="https://www.oneeducation.org.uk/wp-content/uploads/2020/03/car.png" alt="Automobile Repair">
                <p>Automobile Repair</p>
            </div>
            <div class="service-box" data-service="House Cleaning Services" onclick="openService('House Cleaning Services')">
                <img src="https://via.placeholder.com/200x120" alt="House Cleaning">
                <p>House Cleaning</p>
            </div>
            <div class="service-box" data-service="Plumbing Services" onclick="openService('Plumbing Services')">
                <img src="https://via.placeholder.com/200x120" alt="Plumbing">
                <p>Plumbing</p>
            </div>
            <div class="service-box" data-service="Electrician Services" onclick="openService('Electrician Services')">
                <img src="https://via.placeholder.com/200x120" alt="Electrician">
                <p>Electrician</p>
            </div>
            <div class="service-box" data-service="AC Installation & Repair" onclick="openService('AC Installation & Repair')">
                <img src="https://via.placeholder.com/200x120" alt="AC Repair">
                <p>AC Repair</p>
            </div>
            <div class="service-box" data-service="Home Painting" onclick="openService('Home Painting')">
                <img src="https://via.placeholder.com/200x120" alt="Home Painting">
                <p>Home Painting</p>
            </div>
            <div class="service-box" data-service="Beauty Services at Home" onclick="openService('Beauty Services at Home')">
                <img src="https://via.placeholder.com/200x120" alt="Beauty Services">
                <p>Beauty Services</p>
            </div>
            <div class="service-box" data-service="Sofa & Carpet Cleaning" onclick="openService('Sofa & Carpet Cleaning')">
                <img src="https://via.placeholder.com/200x120" alt="Sofa Cleaning">
                <p>Sofa Cleaning</p>
            </div>
            <div class="service-box" data-service="Home-Cooked Meal Delivery" onclick="openService('Home-Cooked Meal Delivery')">
                <img src="https://via.placeholder.com/200x120" alt="Meal Delivery">
                <p>Meal Delivery</p>
            </div>
            <div class="service-box" data-service="Laundry & Dry Cleaning" onclick="openService('Laundry & Dry Cleaning')">
                <img src="https://via.placeholder.com/200x120" alt="Laundry">
                <p>Laundry</p>
            </div>
            <div class="service-box" data-service="Gardening & Lawn Care" onclick="openService('Gardening & Lawn Care')">
                <img src="https://via.placeholder.com/200x120" alt="Gardening">
                <p>Gardening</p>
            </div>
            <div class="service-box" data-service="Courier & Delivery Services" onclick="openService('Courier & Delivery Services')">
                <img src="https://via.placeholder.com/200x120" alt="Courier">
                <p>Courier</p>
            </div>
            <div class="service-box" data-service="Babysitting & Elder Care" onclick="openService('Babysitting & Elder Care')">
                <img src="https://via.placeholder.com/200x120" alt="Babysitting">
                <p>Babysitting</p>
            </div>
            <div class="service-box" data-service="Tailoring & Alterations" onclick="openService('Tailoring & Alterations')">
                <img src="https://via.placeholder.com/200x120" alt="Tailoring">
                <p>Tailoring</p>
            </div>
            <div class="service-box" data-service="Packers & Movers (Relocation Services)" onclick="openService('Packers & Movers (Relocation Services)')">
                <img src="https://via.placeholder.com/200x120" alt="Packers & Movers">
                <p>Packers & Movers</p>
            </div>
            <div class="service-box" data-service="Water Purifier Repair & Installation" onclick="openService('Water Purifier Repair & Installation')">
                <img src="https://via.placeholder.com/200x120" alt="Water Purifier">
                <p>Water Purifier</p>
            </div>
            <div class="service-box" data-service="Computer & IT Support" onclick="openService('Computer & IT Support')">
                <img src="https://via.placeholder.com/200x120" alt="IT Support">
                <p>IT Support</p>
            </div>
            <div class="service-box" data-service="Event Planning & Decoration" onclick="openService('Event Planning & Decoration')">
                <img src="https://via.placeholder.com/200x120" alt="Event Planning">
                <p>Event Planning</p>
            </div>
            <div class="service-box" data-service="Driver Services" onclick="openService('Driver Services')">
                <img src="https://via.placeholder.com/200x120" alt="Driver">
                <p>Driver</p>
            </div>
            <div class="service-box" data-service="Electrician, Plumber, Carpenter, & Mechanic Services" onclick="openService('Electrician, Plumber, Carpenter, & Mechanic Services')">
                <img src="https://via.placeholder.com/200x120" alt="Home Repairs">
                <p>Home Repairs</p>
            </div>
        </div>
    </div>
    <div class="profile-container" id="profilePage">
        <div class="top-bar">
            <div class="logo" onclick="navigate('homePage')">CityEase</div>
            <div class="search-bar">
                <input type="text" id="searchInputProfile" placeholder="Search for services" oninput="searchServices()">
            </div>
            <div>
                <button class="login-btn" onclick="navigate('loginPage')">Login</button>
                <button class="menu-btn" onclick="toggleMenu('menuDropdownProfile')">Menu</button>
                <div class="menu-dropdown" id="menuDropdownProfile">
                    <a onclick="navigate('profilePage')">Profile</a>
                    <a onclick="navigate('feedbackPage')">Feedback</a>
                    <a onclick="navigate('termsPage')">Terms & Conditions</a>
                    <a onclick="logout()">Logout</a>
                </div>
            </div>
        </div>
        <h1 style="margin-top: 20px;">Profile</h1>
        <div class="profile-header">
            <div class="profile-pic-container">
                <img src="https://via.placeholder.com/100" class="profile-pic" id="profilePic" alt="Profile Picture">
                <input type="file" id="profilePicUpload" accept="image/*" style="display: none;" onchange="uploadProfilePic(event)">
                <button class="upload-btn" onclick="document.getElementById('profilePicUpload').click()">+</button>
            </div>
            <div class="profile-info" id="profileInfo">
                <h1 id="profileNameDisplay">Your Name</h1>
                <p><strong>Email:</strong> <span id="profileEmailDisplay">Not provided</span></p>
                <p><strong>Phone:</strong> <span id="profilePhoneDisplay">Not provided</span></p>
                <p><strong>Address:</strong> <span id="profileAddressDisplay">Not provided</span></p>
            </div>
        </div>
        <div class="profile-section">
            <h2>Your Orders</h2>
            <div id="orderHistory">
                <div class="order-item">
                    <p><strong>Service:</strong> Plumbing - Pipe Leakage Repair</p>
                    <p><strong>Date:</strong> March 25, 2025</p>
                    <p><strong>Status:</strong> Completed</p>
                </div>
                <div class="order-item">
                    <p><strong>Service:</strong> House Cleaning - Deep Cleaning</p>
                    <p><strong>Date:</strong> March 20, 2025</p>
                    <p><strong>Status:</strong> In Progress</p>
                </div>
            </div>
        </div>
        <div class="profile-section">
            <h2>Saved Addresses</h2>
            <div id="savedAddresses"></div>
            <button onclick="addNewAddress()" style="background-color: #ff6200; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">Add New Address</button>
        </div>
        <div class="profile-section">
            <h2>Feedback & Ratings</h2>
            <div id="feedbackRatings">
                <div class="feedback-item">
                    <p><strong>Service:</strong> Plumbing</p>
                    <p><strong>Rating:</strong> ★★★★☆</p>
                    <p><strong>Comment:</strong> Great service, fixed the leak quickly!</p>
                </div>
                <div class="feedback-item">
                    <p><strong>Service:</strong> House Cleaning</p>
                    <p><strong>Rating:</strong> ★★★★★</p>
                    <p><strong>Comment:</strong> Spotless and professional!</p>
                </div>
            </div>
        </div>
        <div class="profile-section">
            <h2>Profile Edit <i class="fas fa-pencil-alt" style="cursor: pointer;" onclick="toggleEditProfile()"></i></h2>
            <form class="settings-form" id="editProfileForm" style="display: none;" onsubmit="saveProfile(event)">
                <input type="text" id="profileName" placeholder="Full Name">
                <input type="email" id="profileEmail" placeholder="Email Address">
                <input type="tel" id="profilePhone" placeholder="Phone Number">
                <input type="text" id="profileAddress" placeholder="Address">
                <div class="password-container">
                    <input type="password" id="newPassword" placeholder="New Password">
                    <i class="eye-icon fas fa-eye" onclick="toggleNewPassword()" id="newPasswordEye"></i>
                </div>
                <div class="password-container">
                    <input type="password" id="confirmPassword" placeholder="Confirm New Password">
                    <i class="eye-icon fas fa-eye" onclick="toggleConfirmPassword()" id="confirmPasswordEye"></i>
                </div>
                <button type="submit">Save Changes</button>
            </form>
        </div>
    </div>
    <div class="feedback-container" id="feedbackPage">
        <div class="top-bar">
            <div class="logo" onclick="navigate('homePage')">CityEase</div>
            <div class="search-bar">
                <input type="text" id="searchInputFeedback" placeholder="Search for services" oninput="searchServices()">
            </div>
            <div>
                <button class="login-btn" onclick="navigate('loginPage')">Login</button>
                <button class="menu-btn" onclick="toggleMenu('menuDropdownFeedback')">Menu</button>
                <div class="menu-dropdown" id="menuDropdownFeedback">
                    <a onclick="navigate('profilePage')">Profile</a>
                    <a onclick="navigate('feedbackPage')">Feedback</a>
                    <a onclick="navigate('termsPage')">Terms & Conditions</a>
                    <a onclick="logout()">Logout</a>
                </div>
            </div>
        </div>
        <h1 style="margin-top: 20px;">Feedback</h1>
        <form id="feedbackForm" onsubmit="submitFeedback(event)">
            <div>
                <label for="overallRating">Overall Rating:</label>
                <select id="overallRating">
                    <option value="5">⭐⭐⭐⭐⭐</option>
                    <option value="4">⭐⭐⭐⭐☆</option>
                    <option value="3">⭐⭐⭐☆☆</option>
                    <option value="2">⭐⭐☆☆☆</option>
                    <option value="1">⭐☆☆☆☆</option>
                </select>
            </div>
            <input type="text" id="feedbackName" placeholder="Your Name (e.g., Rohan Sharma)" required>
            <textarea id="feedbackMessage" placeholder="Write Your Feedback" required></textarea>
            <div>
                <label>Would You Recommend This to Others?</label>
                <div style="display: flex; align-items: center;">
                    <label style="margin-right: 10px;">
                        <input type="radio" name="recommend" value="yes" checked> ✅ Yes
                    </label>
                    <label>
                        <input type="radio" name="recommend" value="no"> ❌ No
                    </label>
                </div>
            </div>
            <button type="submit">Submit Feedback</button>
        </form>
        <h2>Previous Feedbacks</h2>
        <div id="previousFeedbacks">
            <div class="feedback-item">
                <p><strong>Name:</strong> Priya Iyer</p>
                <p><strong>Rating:</strong> ★★★★★</p>
                <p><strong>Feedback:</strong> "The plumbing service was excellent! The technician arrived on time and fixed the leak quickly. Highly recommend!"</p>
            </div>
            <div class="feedback-item">
                <p><strong>Name:</strong> Arjun Mehta</p>
                <p><strong>Rating:</strong> ★★★★☆</p>
                <p><strong>Feedback:</strong> "I used the house cleaning service, and they did a fantastic job. My home looks spotless!"</p>
            </div>
            <div class="feedback-item">
                <p><strong>Name:</strong> Kavya Sharma</p>
                <p><strong>Rating:</strong> ★★★☆☆</p>
                <p><strong>Feedback:</strong> "The electrician was knowledgeable, but the service took longer than expected. Overall, satisfied with the work done."</p>
            </div>
            <div class="feedback-item">
                <p><strong>Name:</strong> Rohan Singh</p>
                <p><strong>Rating:</strong> ★★★★★</p>
                <p><strong>Feedback:</strong> "Great experience with the beauty services at home. The staff was professional and friendly!"</p>
            </div>
            <div class="feedback-item">
                <p><strong>Name:</strong> Neha Gupta</p>
                <p><strong>Rating:</strong> ★★★★☆</p>
                <p><strong>Feedback:</strong> "The meal delivery service was prompt, and the food was delicious. Will order again!"</p>
            </div>
        </div>
    </div>
    <div class="terms-container" id="termsPage">
        <div class="top-bar">
            <div class="logo" onclick="navigate('homePage')">CityEase</div>
            <div class="search-bar">
                <input type="text" id="searchInputTerms" placeholder="Search for services" oninput="searchServices()">
            </div>
            <div>
                <button class="login-btn" onclick="navigate('loginPage')">Login</button>
                <button class="menu-btn" onclick="toggleMenu('menuDropdownTerms')">Menu</button>
                <div class="menu-dropdown" id="menuDropdownTerms">
                    <a onclick="navigate('profilePage')">Profile</a>
                    <a onclick="navigate('feedbackPage')">Feedback</a>
                    <a onclick="navigate('termsPage')">Terms & Conditions</a>
                    <a onclick="logout()">Logout</a>
                </div>
            </div>
        </div>
        <h1 style="margin-top: 20px;">Terms and Conditions</h1>
        <p>Effective Date: [Insert Date]</p>
        <h2>1. Introduction</h2>
        <p>Welcome to [Your Company Name] ("Company," "we," "our," or "us"). These Terms and Conditions ("Terms") govern your use of our website [Your Website URL] ("Website") and the services provided ("Services"). By accessing or using our Website, you agree to comply with these Terms. If you do not agree, do not use our Services.</p>
        <h2>2. Your Account</h2>
        <p>You may be required to create an account to use certain features. You are responsible for maintaining account confidentiality and all activities under your account. We reserve the right to refuse service, terminate accounts, or remove content at our discretion.</p>
        <h2>3. Use of Our Services</h2>
        <p>You agree to use our Services legally and ethically. You may not:</p>
        <ul>
            <li>Use our Services for fraudulent or illegal purposes.</li>
            <li>Infringe on intellectual property rights.</li>
            <li>Disrupt or interfere with the Website’s functionality.</li>
            <li>Misrepresent yourself or impersonate others.</li>
        </ul>
        <h2>4. Purchases, Pricing, and Payments</h2>
        <p>We may offer paid Services, and you agree to provide accurate payment details. Prices may change without notice, and we reserve the right to refuse orders. Payments are subject to third-party payment providers’ terms.</p>
        <h2>5. Intellectual Property Rights</h2>
        <p>All content, trademarks, and intellectual property on our Website are owned by us or our licensors. Unauthorized use of our intellectual property is prohibited.</p>
        <h2>6. Third-Party Links and Services</h2>
        <p>Our Website may contain links to third-party websites. We do not control these websites and are not responsible for their content or policies.</p>
        <h2>7. Dispute Resolution & Governing Law</h2>
        <p>These Terms are governed by the laws of [Your Country/State]. Any disputes will be resolved through binding arbitration or in the courts of [Jurisdiction], unless otherwise required by law.</p>
        <h2>8. Disclaimer of Warranties & Limitation of Liability</h2>
        <p>Our Services are provided "as is" without warranties of any kind. To the fullest extent permitted by law, we are not liable for any damages resulting from your use of our Services.</p>
        <h2>9. Privacy Policy</h2>
        <p>Your use of our Services is also governed by our Privacy Policy [insert link], which outlines how we collect, use, and protect your data.</p>
        <h2>10. Changes to These Terms</h2>
        <p>We may modify these Terms at any time. Your continued use of our Services constitutes acceptance of the updated Terms.</p>
        <h2>11. Contact Us</h2>
        <p>For questions or concerns, contact us at:</p>
        <p>[Your Company Name]<br>[Your Business Address]<br>Email: [Your Email]<br>Phone: [Your Contact Number]</p>
    </div>
    <div class="service-details" id="serviceDetails">
        <div class="top-bar">
            <div class="logo" onclick="navigate('homePage')">CityEase</div>
            <div class="search-bar">
                <input type="text" id="searchInputServiceDetails" placeholder="Search for services" oninput="searchServices()">
            </div>
            <div>
                <button class="login-btn" onclick="navigate('loginPage')">Login</button>
                <button class="menu-btn" onclick="toggleMenu()">Menu</button>
                <div class="menu-dropdown" id="menuDropdown">
                    <a onclick="navigate('profilePage')">Profile</a>
                    <a onclick="navigate('feedbackPage')">Feedback</a>
                    <a onclick="navigate('termsPage')">Terms & Conditions</a>
                    <a onclick="logout()">Logout</a>
                </div>
            </div>
        </div>
        <h1 style="margin-top: 20px;">Service Details</h1>
        <div class="service-details-content">
            <button class="close-btn" onclick="navigateBack()">Back to Home</button>
            <h2 id="serviceTitle"></h2>
            <div id="subServicesList" class="sub-services-grid"></div>
            <div id="professionalsList"></div>
        </div>
    </div>
    <div class="booking-form" id="bookingForm">
        <div class="top-bar">
            <div class="logo" onclick="navigate('homePage')">CityEase</div>
            <div class="search-bar">
                <input type="text" id="searchInputBooking" placeholder="Search for services" oninput="searchServices()">
            </div>
            <div>
                <button class="login-btn" onclick="navigate('loginPage')">Login</button>
                <button class="menu-btn" onclick="toggleMenu()">Menu</button>
                <div class="menu-dropdown" id="menuDropdown">
                    <a onclick="navigate('profilePage')">Profile</a>
                    <a onclick="navigate('feedbackPage')">Feedback</a>
                    <a onclick="navigate('termsPage')">Terms & Conditions</a>
                    <a onclick="logout()">Logout</a>
                </div>
            </div>
        </div>
        <h1 style="margin-top: 20px;">Booking Details</h1>
        <div class="booking-form-content">
            <button class="close-btn" onclick="navigateBack()">Back to Service</button>
            <input type="text" id="firstName" placeholder="First Name" required>
            <input type="text" id="lastName" placeholder="Last Name" required>
            <input type="text" id="address" placeholder="Address" required>
            <input type="text" id="city" placeholder="City" required>
            <input type="text" id="area" placeholder="Area" required>
            <input type="text" id="postalCode" placeholder="Postal Code" required>
            <input type="text" id="country" placeholder="Country" required>
            <input type="text" id="phone" placeholder="Phone Number" required>
            <input type="email" id="emailBooking" placeholder="Email Address" required>
            <div class="payment-methods">
                <div class="payment-method selected" onclick="selectPaymentMethod('cod')">Cash on Delivery</div>
            </div>
            <button onclick="submitBooking()">Submit</button>
        </div>
    </div>
    <div class="payment-confirmation" id="paymentConfirmation">
        <div class="top-bar">
            <div class="logo" onclick="navigate('homePage')">CityEase</div>
            <div class="search-bar">
                <input type="text" id="searchInputPayment" placeholder="Search for services" oninput="searchServices()">
            </div>
            <div>
                <button class="login-btn" onclick="navigate('loginPage')">Login</button>
                <button class="menu-btn" onclick="toggleMenu()">Menu</button>
                <div class="menu-dropdown" id="menuDropdown">
                    <a onclick="navigate('profilePage')">Profile</a>
                    <a onclick="navigate('feedbackPage')">Feedback</a>
                    <a onclick="navigate('termsPage')">Terms & Conditions</a>
                    <a onclick="logout()">Logout</a>
                </div>
            </div>
        </div>
        <h1 style="margin-top: 20px;">Payment Confirmation</h1>
        <div class="payment-confirmation-content">
            <button class="close-btn" onclick="navigateBack()">Back to Home</button>
            <p>Payment Method: Cash on Delivery</p>
            <p>Your booking is confirmed! The professional will contact you soon.</p>
        </div>
    </div>
    <script>
        const subServices = {
            'Automobile Repair & Maintenance': [
                'Car Engine Repair', 'Oil Change & Servicing', 'Brake & Clutch Repair',
                'Tire Replacement & Wheel Alignment', 'Car AC Repair', 'Car Battery Replacement'
            ],
            'House Cleaning Services': [
                'Deep Cleaning', 'Kitchen Cleaning', 'Bathroom Cleaning',
                'Sofa & Carpet Cleaning', 'Window & Glass Cleaning'
            ],
            'Plumbing Services': [
                'Pipe Leakage Repair', 'Tap & Faucet Installation', 'Bathroom & Toilet Repairs',
                'Water Tank Cleaning', 'Drainage Unclogging'
            ],
            'Electrician Services': [
                'Wiring & Switchboard Repair', 'Ceiling Fan Installation', 'Inverter & Battery Setup',
                'Home Appliance Repair', 'Power Backup Solutions'
            ],
            'AC Installation & Repair': [
                'New AC Installation', 'AC Gas Refilling', 'AC Servicing & Cleaning',
                'AC Remote & Sensor Repair'
            ],
            'Home Painting': [
                'Interior Painting', 'Exterior Painting', 'Waterproofing', 'Wood Polish & Varnishing'
            ],
            'Beauty Services at Home': [
                'Haircut & Styling', 'Facial & Skincare', 'Waxing & Threading',
                'Bridal Makeup & Mehendi', 'Manicure & Pedicure'
            ],
            'Sofa & Carpet Cleaning': [
                'Sofa Dry Cleaning', 'Carpet Steam Cleaning', 'Mattress & Curtain Cleaning'
            ],
            'Home-Cooked Meal Delivery': [
                'Tiffin Services', 'Meal Subscription Plans', 'Diet & Healthy Food Delivery'
            ],
            'Laundry & Dry Cleaning': [
                'Wash & Fold', 'Steam Press & Ironing', 'Dry Cleaning for Special Fabrics'
            ],
            'Gardening & Lawn Care': [
                'Lawn Mowing', 'Planting & Landscaping', 'Pest Control for Plants'
            ],
            'Courier & Delivery Services': [
                'Local Parcel Delivery', 'Same-Day Delivery', 'Document & Food Delivery'
            ],
            'Babysitting & Elder Care': [
                'Full-Time Babysitting', 'Senior Citizen Care', 'Special Needs Assistance'
            ],
            'Tailoring & Alterations': [
                'Dress Stitching', 'Cloth Alterations', 'Blouse & Suit Designing'
            ],
            'Packers & Movers (Relocation Services)': [
                'Household Shifting', 'Office Relocation', 'Furniture Moving'
            ],
            'Water Purifier Repair & Installation': [
                'RO Water Purifier Service', 'Filter & Membrane Replacement', 'UV & UF Purifier Installation'
            ],
            'Computer & IT Support': [
                'Laptop & PC Repair', 'Printer & Networking Support', 'Data Recovery'
            ],
            'Event Planning & Decoration': [
                'Wedding Planning', 'Birthday & Party Decorations', 'Corporate Event Management'
            ],
            'Driver Services': [
                'Personal Car Driver', 'Outstation & City Rides', 'Monthly Driver Hiring'
            ],
            'Electrician, Plumber, Carpenter, & Mechanic Services': [
                'General Home Repairs', 'Furniture Making & Polishing', 'Appliance Repairs & Installations'
            ]
        };
        const professionals = {
            'Automobile Repair & Maintenance': {
                'Car Engine Repair': [
                    { name: 'Ravi Kumar', phone: '9876543210', rating: '★★★★☆', profession: 'Mechanic', subProfession: 'Car Engine Specialist', email: 'ravi@cityease.in', hours: '9 AM - 6 PM', availability: 'Available' },
                    { name: 'Amit Sharma', phone: '8765432109', rating: '★★★★★', profession: 'Mechanic', subProfession: 'Engine Repair Expert', email: 'amit@cityease.in', hours: '8 AM - 5 PM', availability: 'Available' },
                    { name: 'Sanjay Verma', phone: '7654321098', rating: '★★★★☆', profession: 'Mechanic', subProfession: 'Engine Specialist', email: 'sanjay@cityease.in', hours: '10 AM - 7 PM', availability: 'Busy' }
                ],
                'Oil Change & Servicing': [
                    { name: 'Suresh Reddy', phone: '8765432109', rating: '★★★★★', profession: 'Mechanic', subProfession: 'Oil Change Expert', email: 'suresh@cityease.in', hours: '10 AM - 7 PM', availability: 'Busy' },
                    { name: 'Rajesh Verma', phone: '9876543211', rating: '★★★★☆', profession: 'Mechanic', subProfession: 'Servicing Specialist', email: 'rajesh@cityease.in', hours: '9 AM - 6 PM', availability: 'Available' },
                    { name: 'Vikas Kumar', phone: '7654321098', rating: '★★★★☆', profession: 'Mechanic', subProfession: 'Oil Specialist', email: 'vikas@cityease.in', hours: '8 AM - 5 PM', availability: 'Available' }
                ]
            },
            'House Cleaning Services': {
                'Deep Cleaning': [
                    { name: 'Priya Singh', phone: '9876543211', rating: '★★★★★', profession: 'Cleaner', subProfession: 'Deep Cleaning Specialist', email: 'priya@cityease.in', hours: '8 AM - 4 PM', availability: 'Available' },
                    { name: 'Anita Devi', phone: '8765432110', rating: '★★★★☆', profession: 'Cleaner', subProfession: 'Deep Cleaning Expert', email: 'anita@cityease.in', hours: '9 AM - 5 PM', availability: 'Available' },
                    { name: 'Reena Kumari', phone: '7654321098', rating: '★★★★☆', profession: 'Cleaner', subProfession: 'Cleaning Specialist', email: 'reena@cityease.in', hours: '8 AM - 4 PM', availability: 'Available' }
                ],
                'Kitchen Cleaning': [
                    { name: 'Lakshmi Rao', phone: '8765432110', rating: '★★★★☆', profession: 'Cleaner', subProfession: 'Kitchen Cleaner', email: 'lakshmi@cityease.in', hours: '9 AM - 5 PM', availability: 'Available' },
                    { name: 'Meena Kumari', phone: '9876543212', rating: '★★★★★', profession: 'Cleaner', subProfession: 'Kitchen Cleaning Specialist', email: 'meena@cityease.in', hours: '8 AM - 4 PM', availability: 'Available' },
                    { name: 'Sunita Devi', phone: '7654321098', rating: '★★★★☆', profession: 'Cleaner', subProfession: 'Kitchen Specialist', email: 'sunita@cityease.in', hours: '9 AM - 5 PM', availability: 'Available' }
                ]
            }
        };
        let pageHistory = [];
        let currentPage = 'loginPage';
        let currentUserEmail = null;
        document.addEventListener('DOMContentLoaded', () => {
            const loginPage = document.getElementById('loginPage');
            const loginBox = loginPage.querySelector('.login-box');
            loginPage.classList.add('visible');
            setTimeout(() => loginBox.classList.add('visible'), 10);
            window.history.pushState({ page: 'loginPage' }, '', '#loginPage');
            loadProfile();
            loadSavedAddresses();
        });
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.classList.remove('fas', 'fa-eye');
                eyeIcon.classList.add('fas', 'fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                eyeIcon.classList.remove('fas', 'fa-eye-slash');
                eyeIcon.classList.add('fas', 'fa-eye');
            }
        }
        function toggleNewPassword() {
            const passwordInput = document.getElementById('newPassword');
            const eyeIcon = document.getElementById('newPasswordEye');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.classList.remove('fas', 'fa-eye');
                eyeIcon.classList.add('fas', 'fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                eyeIcon.classList.remove('fas', 'fa-eye-slash');
                eyeIcon.classList.add('fas', 'fa-eye');
            }
        }
        function toggleConfirmPassword() {
            const passwordInput = document.getElementById('confirmPassword');
            const eyeIcon = document.getElementById('confirmPasswordEye');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.classList.remove('fas', 'fa-eye');
                eyeIcon.classList.add('fas', 'fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                eyeIcon.classList.remove('fas', 'fa-eye-slash');
                eyeIcon.classList.add('fas', 'fa-eye');
            }
        }
        function hideAllPages() {
            const pages = ['loginPage', 'homePage', 'profilePage', 'feedbackPage', 'serviceDetails', 'bookingForm', 'paymentConfirmation', 'termsPage'];
            pages.forEach(pageId => {
                const page = document.getElementById(pageId);
                page.classList.remove('visible');
                if (pageId === 'loginPage') {
                    page.querySelector('.login-box').classList.remove('visible');
                }
            });
        }
        function navigate(pageId, isBack = false) {
            if (currentPage === pageId) return;
            if (!isBack) {
                pageHistory.push(currentPage);
                window.history.pushState({ page: pageId }, '', `#${pageId}`);
            }
            hideAllPages();
            const page = document.getElementById(pageId);
            setTimeout(() => {
                page.classList.add('visible');
                if (pageId === 'loginPage') {
                    page.querySelector('.login-box').classList.add('visible');
                } else if (pageId === 'profilePage') {
                    loadProfile();
                }
            }, 10);
            currentPage = pageId;
        }
        function navigateBack() {
            if (pageHistory.length > 0) {
                const previousPage = pageHistory.pop();
                navigate(previousPage, true);
            } else {
                navigate('homePage', true);
            }
        }
        window.onpopstate = function(event) {
            if (event.state && event.state.page) {
                pageHistory.pop();
                navigate(event.state.page, true);
            }
        };
        function isValidPassword(password) {
            const passwordRegex = /^(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,}$/;
            return passwordRegex.test(password);
        }
        function login() {
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();
            const storedUsers = JSON.parse(localStorage.getItem('users')) || {};
            const errorMessage = document.getElementById('loginError');
            if (email && password) {
                if (storedUsers[email] && storedUsers[email].password === password) {
                    currentUserEmail = email;
                    errorMessage.style.display = 'none';
                    navigate('homePage');
                } else {
                    errorMessage.textContent = 'Invalid email/phone or password.';
                    errorMessage.style.display = 'block';
                }
            } else {
                errorMessage.textContent = 'Please enter both email/phone and password.';
                errorMessage.style.display = 'block';
            }
        }
        function continueWithoutLogin() {
            currentUserEmail = null;
            navigate('homePage');
        }
        function showRegister() {
            const box = document.querySelector('.login-box');
            box.innerHTML = `
                <h2>Welcome to CityEase</h2>
                <input type="text" id="name" placeholder="Your name">
                <input type="text" id="email" placeholder="Enter email">
                <div class="password-container">
                    <input type="password" id="password" placeholder="Pick a password (min 8 chars, 1 capital, 1 number, 1 special)">
                    <i class="eye-icon fas fa-eye" onclick="togglePassword()" id="eyeIcon"></i>
                </div>
                <button onclick="register()">Sign Up</button>
                <p><a href="#" onclick="location.reload()">Back to Login</a></p>
                <button class="continue-btn" onclick="continueWithoutLogin()">Continue Without Login</button>
                <div class="error-message" id="registerError" style="display: none;">Password must be 8+ characters with 1 capital, 1 number, and 1 special character.</div>
            `;
        }
        function register() {
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value.trim();
            const errorMessage = document.getElementById('registerError');
            const storedUsers = JSON.parse(localStorage.getItem('users')) || {};
            if (name && email && password) {
                if (!isValidPassword(password)) {
                    errorMessage.style.display = 'block';
                    return;
                }
                if (storedUsers[email]) {
                    errorMessage.textContent = 'Email already registered. Please log in.';
                    errorMessage.style.display = 'block';
                    return;
                }
                storedUsers[email] = { name, email, password };
                localStorage.setItem('users', JSON.stringify(storedUsers));
                currentUserEmail = email;
                navigate('homePage');
            } else {
                errorMessage.textContent = 'Please fill in all fields.';
                errorMessage.style.display = 'block';
            }
        }
        function showForgotPassword() {
            const box = document.querySelector('.login-box');
            box.innerHTML = `
                <h2>Forgot Password</h2>
                <input type="text" id="email" placeholder="Enter your email">
                <button onclick="sendResetLink()">Send Reset Link</button>
                <p><a href="#" onclick="location.reload()">Back to Login</a></p>
                <div class="error-message" id="forgotError" style="display: none;">Email not found.</div>
            `;
        }
        function sendResetLink() {
            const email = document.getElementById('email').value.trim();
            const storedUsers = JSON.parse(localStorage.getItem('users')) || {};
            const errorMessage = document.getElementById('forgotError');
            if (email && storedUsers[email]) {
                const resetCode = Math.random().toString(36).substring(2, 8).toUpperCase();
                localStorage.setItem(`resetCode_${email}`, resetCode);
                console.log(`Reset link sent to ${email}: Click here to reset your password with code ${resetCode}`);
                alert(`A reset link has been sent to ${email}. Please check your email. (Simulated: Use code ${resetCode})`);
                showResetPassword(email);
            } else {
                errorMessage.textContent = 'Email not found.';
                errorMessage.style.display = 'block';
            }
        }
        function showResetPassword(email) {
            const box = document.querySelector('.login-box');
            box.innerHTML = `
                <h2>Reset Password</h2>
                <input type="text" id="resetCode" placeholder="Enter reset code">
                <div class="password-container">
                    <input type="password" id="newPassword" placeholder="New Password">
                    <i class="eye-icon fas fa-eye" onclick="toggleNewPassword()" id="newPasswordEye"></i>
                </div>
                <div class="password-container">
                    <input type="password" id="confirmPassword" placeholder="Confirm New Password">
                    <i class="eye-icon fas fa-eye" onclick="toggleConfirmPassword()" id="confirmPasswordEye"></i>
                </div>
                <button onclick="resetPassword('${email}')">Reset Password</button>
                <p><a href="#" onclick="location.reload()">Back to Login</a></p>
                <div class="error-message" id="resetError" style="display: none;">Invalid code or passwords do not match.</div>
            `;
        }
        function resetPassword(email) {
            const resetCode = document.getElementById('resetCode').value.trim();
            const newPassword = document.getElementById('newPassword').value.trim();
            const confirmPassword = document.getElementById('confirmPassword').value.trim();
            const storedCode = localStorage.getItem(`resetCode_${email}`);
            const errorMessage = document.getElementById('resetError');
            if (resetCode === storedCode && newPassword && newPassword === confirmPassword) {
                if (!isValidPassword(newPassword)) {
                    errorMessage.textContent = 'Password must be 8+ characters with 1 capital, 1 number, and 1 special character.';
                    errorMessage.style.display = 'block';
                    return;
                }
                const storedUsers = JSON.parse(localStorage.getItem('users')) || {};
                storedUsers[email].password = newPassword;
                localStorage.setItem('users', JSON.stringify(storedUsers));
                localStorage.removeItem(`resetCode_${email}`);
                alert('Password reset successfully! Please log in.');
                location.reload();
            } else {
                errorMessage.textContent = 'Invalid code or passwords do not match.';
                errorMessage.style.display = 'block';
            }
        }
        function toggleMenu(menuId = 'menuDropdown') {
            const menu = document.getElementById(menuId);
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }
        function logout() {
            currentUserEmail = null;
            localStorage.removeItem(`profile_${currentUserEmail}`);
            navigate('loginPage');
        }
        function searchServices() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const serviceBoxes = document.querySelectorAll('.service-box');
            serviceBoxes.forEach(box => {
                const serviceName = box.getAttribute('data-service').toLowerCase();
                const displayName = box.querySelector('p').textContent.toLowerCase();
                if (serviceName.includes(query) || displayName.includes(query)) {
                    box.classList.remove('hidden');
                } else {
                    box.classList.add('hidden');
                }
            });
        }
        function openService(service) {
            document.getElementById('serviceTitle').textContent = service;
            const subServiceList = document.getElementById('subServicesList');
            const professionalsList = document.getElementById('professionalsList');
            subServiceList.innerHTML = subServices[service].map(sub => `
                <div class="sub-service-box" onclick="showProfessionals('${service}', '${sub}')">
                    <img src="https://via.placeholder.com/80" alt="icon">
                    <p>${sub}</p>
                </div>
            `).join('');
            professionalsList.innerHTML = '';
            navigate('serviceDetails');
        }
        function showProfessionals(service, subService) {
            const serviceData = (professionals[service] && professionals[service][subService]) || [
                { name: 'Default Worker', phone: '9999999999', rating: '★★★★☆', profession: service.split(' ')[0], subProfession: subService, email: 'worker@cityease.in', hours: '9 AM - 5 PM', availability: 'Available' }
            ];
            const list = document.getElementById('professionalsList');
            list.innerHTML = serviceData.map(pro => `
                <div class="professional">
                    <img src="https://via.placeholder.com/80" alt="${pro.name}">
                    <div class="professional-details">
                        <p><strong>Name:</strong> ${pro.name}</p>
                        <p><strong>Phone:</strong> ${pro.phone}</p>
                        <p><strong>Rating:</strong> <span class="rating">${pro.rating}</span></p>
                        <p><strong>Profession:</strong> ${pro.profession}</p>
                        <p><strong>Sub-Profession:</strong> ${pro.subProfession}</p>
                        <p><strong>Email:</strong> ${pro.email}</p>
                        <p><strong>Working Hours:</strong> ${pro.hours}</p>
                        <p><strong>Availability:</strong> ${pro.availability}</p>
                        <button class="book-now-btn" onclick="bookProfessional('${pro.name}', '${service}', '${pro.subProfession}')">Book Now</button>
                    </div>
                </div>
            `).join('');
        }
        function bookProfessional(name, service, subProfession) {
            document.getElementById('bookingForm').dataset.name = name;
            document.getElementById('bookingForm').dataset.service = service;
            document.getElementById('bookingForm').dataset.subProfession = subProfession;
            navigate('bookingForm');
        }
        function submitBooking() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const address = document.getElementById('address').value.trim();
            const city = document.getElementById('city').value.trim();
            const area = document.getElementById('area').value.trim();
            const postalCode = document.getElementById('postalCode').value.trim();
            const country = document.getElementById('country').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const email = document.getElementById('emailBooking').value.trim();
            if (firstName && lastName && address && city && area && postalCode && country && phone && email) {
                const bookingDetails = `
                    Booking Confirmed!
                    Name: ${firstName} ${lastName}
                    Address: ${address}, ${city}, ${area}, ${postalCode}, ${country}
                    Phone: ${phone}
                    Email: ${email}
                    Service: ${document.getElementById('bookingForm').dataset.service}
                    Professional: ${document.getElementById('bookingForm').dataset.name}
                    Sub-Service: ${document.getElementById('bookingForm').dataset.subProfession}
                `;
                console.log(`Email sent to visionfame9@gmail.com with details:\n${bookingDetails}`);
                navigate('paymentConfirmation');
            } else {
                alert('Please fill in all fields.');
            }
        }
        function uploadProfilePic(event) {
            const file = event.target.files[0];
            if (file && currentUserEmail) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.getElementById('profilePic');
                    img.src = e.target.result;
                    localStorage.setItem(`profilePic_${currentUserEmail}`, e.target.result);
                };
                reader.readAsDataURL(file);
            }
        }
        function toggleEditProfile() {
            const form = document.getElementById('editProfileForm');
            form.style.display = form.style.display === 'block' ? 'none' : 'block';
            if (form.style.display === 'block') {
                const profile = JSON.parse(localStorage.getItem(`profile_${currentUserEmail}`)) || {};
                document.getElementById('profileName').value = profile.name || '';
                document.getElementById('profileEmail').value = profile.email || '';
                document.getElementById('profilePhone').value = profile.phone || '';
                document.getElementById('profileAddress').value = profile.address || '';
            }
        }
        function saveProfile(event) {
            event.preventDefault();
            if (!currentUserEmail) {
                alert('Please log in to save your profile.');
                return;
            }
            const name = document.getElementById('profileName').value.trim();
            const email = document.getElementById('profileEmail').value.trim();
            const phone = document.getElementById('profilePhone').value.trim();
            const address = document.getElementById('profileAddress').value.trim();
            const newPassword = document.getElementById('newPassword').value.trim();
            const confirmPassword = document.getElementById('confirmPassword').value.trim();
            if (name && email && phone && address) {
                if (newPassword) {
                    if (!isValidPassword(newPassword)) {
                        alert('New password must be 8+ characters with 1 capital letter, 1 number, and 1 special character.');
                        return;
                    }
                    if (newPassword !== confirmPassword) {
                        alert('Passwords do not match!');
                        return;
                    }
                    const storedUsers = JSON.parse(localStorage.getItem('users')) || {};
                    storedUsers[currentUserEmail].password = newPassword;
                    localStorage.setItem('users', JSON.stringify(storedUsers));
                }
                const profile = {
                    name,
                    email,
                    phone,
                    address,
                    membership: 'Basic',
                    notifications: 'on'
                };
                localStorage.setItem(`profile_${currentUserEmail}`, JSON.stringify(profile));
                alert('Profile saved successfully!');
                loadProfile();
                toggleEditProfile();
            } else {
                alert('Please fill in all required fields.');
            }
        }
        function loadProfile() {
            if (!currentUserEmail) return;
            const profile = JSON.parse(localStorage.getItem(`profile_${currentUserEmail}`));
            const profilePic = localStorage.getItem(`profilePic_${currentUserEmail}`);
            if (profilePic) {
                document.getElementById('profilePic').src = profilePic;
            } else {
                document.getElementById('profilePic').src = 'https://via.placeholder.com/100';
            }
            if (profile) {
                document.getElementById('profileNameDisplay').textContent = profile.name;
                document.getElementById('profileEmailDisplay').textContent = profile.email;
                document.getElementById('profilePhoneDisplay').textContent = profile.phone;
                document.getElementById('profileAddressDisplay').textContent = profile.address;
            } else {
                document.getElementById('profileNameDisplay').textContent = 'Your Name';
                document.getElementById('profileEmailDisplay').textContent = 'Not provided';
                document.getElementById('profilePhoneDisplay').textContent = 'Not provided';
                document.getElementById('profileAddressDisplay').textContent = 'Not provided';
            }
        }
        function loadSavedAddresses() {
            if (!currentUserEmail) return;
            const addresses = JSON.parse(localStorage.getItem(`savedAddresses_${currentUserEmail}`)) || [];
            const savedAddressesDiv = document.getElementById('savedAddresses');
            savedAddressesDiv.innerHTML = '';
            addresses.forEach((address, index) => {
                const addressItem = document.createElement('div');
                addressItem.className = 'address-item';
                addressItem.innerHTML = `
                    <p><strong>Address:</strong> ${address} <button onclick="deleteAddress(${index})" style="color: red;">🗑</button></p>
                `;
                savedAddressesDiv.appendChild(addressItem);
            });
        }
        function addNewAddress() {
            if (!currentUserEmail) {
                alert('Please log in to add an address.');
                return;
            }
            const newAddress = prompt("Enter your new address:");
            if (newAddress) {
                const addresses = JSON.parse(localStorage.getItem(`savedAddresses_${currentUserEmail}`)) || [];
                addresses.push(newAddress);
                localStorage.setItem(`savedAddresses_${currentUserEmail}`, JSON.stringify(addresses));
                loadSavedAddresses();
            }
        }
        function deleteAddress(index) {
            if (!currentUserEmail) return;
            const addresses = JSON.parse(localStorage.getItem(`savedAddresses_${currentUserEmail}`)) || [];
            addresses.splice(index, 1);
            localStorage.setItem(`savedAddresses_${currentUserEmail}`, JSON.stringify(addresses));
            loadSavedAddresses();
        }
        function submitFeedback(event) {
            event.preventDefault();
            const name = document.getElementById('feedbackName').value.trim();
            const message = document.getElementById('feedbackMessage').value.trim();
            const rating = document.getElementById('overallRating').value;
            const recommend = document.querySelector('input[name="recommend"]:checked').value;
            if (name && message) {
                const feedbackItem = document.createElement('div');
                feedbackItem.className = 'feedback-item';
                feedbackItem.innerHTML = `
                    <p><strong>Name:</strong> ${name}</p>
                    <p><strong>Rating:</strong> ${'★'.repeat(rating) + '☆'.repeat(5 - rating)}</p>
                    <p><strong>Feedback:</strong> "${message}"</p>
                `;
                document.getElementById('previousFeedbacks').appendChild(feedbackItem);
                document.getElementById('feedbackForm').reset();
                alert('Thank you for your feedback!');
                console.log(`Email sent to visionfame9@gmail.com with details:\nName: ${name}\nRating: ${rating}\nMessage: ${message}\nRecommend: ${recommend === 'yes' ? 'Yes' : 'No'}`);
            } else {
                alert('Please fill in all fields.');
            }
        }
    </script>
</body>
</html>